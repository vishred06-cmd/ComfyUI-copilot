2025-09-23 17:58:12 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-23 18:04:10 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-23 18:04:44 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-23 18:04:44 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 1
2025-09-23 18:04:44 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-23 18:04:44 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-23 18:04:45 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-23 18:04:45 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 1 historical messages
2025-09-23 18:04:45 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 1 for session 72175c3e-820e-4c36-83d2-2465cd905029
2025-09-23 18:04:45 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '72175c3e-820e-4c36-83d2-2465cd905029', 'workflow_checkpoint_id': 1, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-23 18:04:48 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 1 messages
2025-09-23 18:04:48 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-23 18:04:48 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-23 18:05:01 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'gen_workflow' was called
2025-09-23 18:05:32 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"answer\":\"Successfully generated a custom workflow: AI Generated Workflow\\n\\nAI has generated a personalized workflow solution for you. If you have any questions about the workflow, feel free to ask.\",\"data\":[{\"id\":36691,\"name\":\"AI Generated Workflow\",\"description\":\"Generate an image of a girl playing in the park.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"22e74cc331a1e3f728642ed9026e71da\",\"score\":null,\"source\":\"AI Generated\"}],\"ext\":[{\"type\":\"workflow\",\"data\":[{\"id\":36691,\"name\":\"AI Generated Workflow\",\"description\":\"Generate an image of a girl playing in the park.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"22e74cc331a1e3f728642ed9026e71da\",\"score\":null,\"source\":\"AI Generated\"}]}],\"instruction\":\"Generate an image of a girl playing in the park.\",\"keywords\":[\"girl\",\"playing\",\"park\",\"image generation\"],\"source\":\"generated\"}","annotations":null,"meta":null}
2025-09-23 18:05:32 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'gen_workflow'
2025-09-23 18:05:32 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'gen_workflow': data=1, ext=[{'type': 'workflow', 'data': [{'id': 36691, 'name': 'AI Generated Workflow', 'description': 'Generate an image of a girl playing in the park.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '22e74cc331a1e3f728642ed9026e71da', 'score': None, 'source': 'AI Generated'}]}]
2025-09-23 18:05:32 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'gen_workflow' produced result with data: 1
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 1
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: gen_workflow
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 1
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: Successfully generated a custom workflow: AI Generated Workflow

AI has generated a personalized wor...
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:364 | Workflow tools called: ['gen_workflow']
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:430 | Only gen_workflow was called, returning its result
2025-09-23 18:05:34 | INFO     | mcp_client.py:comfyui_agent_invoke:437 | Returning 1 workflows from gen_workflow
2025-09-23 18:05:34 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: [{'type': 'workflow', 'data': [{'id': 36691, 'name': 'AI Generated Workflow', 'description': 'Generate an image of a girl playing in the park.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '22e74cc331a1e3f728642ed9026e71da', 'score': None, 'source': 'AI Generated'}]}], finished: True
2025-09-23 18:05:34 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 239 chars, ext: True, finished: True
2025-09-23 18:10:20 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-23 18:10:20 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 2
2025-09-23 18:10:20 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-23 18:10:20 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-23 18:10:20 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-23 18:10:20 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 3 historical messages
2025-09-23 18:10:20 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 2 for session 72175c3e-820e-4c36-83d2-2465cd905029
2025-09-23 18:10:20 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '72175c3e-820e-4c36-83d2-2465cd905029', 'workflow_checkpoint_id': 2, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-23 18:10:23 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 3 messages
2025-09-23 18:10:23 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-23 18:10:23 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-23 18:10:26 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'explain_node' was called
2025-09-23 18:10:26 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"data\":{\"nodes_name\":\"DualCLIPLoader\",\"nodes_class_name\":\"DualCLIPLoader\",\"nodes_extension\":\"ComfyUI\",\"nodes_category\":\"advanced/loaders\",\"nodes_description\":{\"EN\":\"The DualCLIPLoader node is designed for loading two CLIP models simultaneously, based on their names and a specified type. It supports loading models for different versions of the Stable Diffusion architecture, enhancing flexibility in model usage for various applications.\",\"ZH\":\"\"},\"nodes_inputs\":[{\"desc\":\"Specifies the name of the first CLIP model to load. The choice of model affects the outcome and capabilities of the loaded model.\",\"name\":\"clip_name1\",\"Comfy_dtype\":\"COMBO[STRING]\",\"is_required\":\"True\",\"python_dtype\":\"str\"},{\"desc\":\"Specifies the name of the second CLIP model to load, allowing for dual model loading to accommodate complex or comparative tasks.\",\"name\":\"clip_name2\",\"Comfy_dtype\":\"COMBO[STRING]\",\"is_required\":\"True\",\"python_dtype\":\"str\"},{\"desc\":\"Determines the type of CLIP models to load, supporting either 'sdxl' or 'sd3' versions, which influences the model's functionality and compatibility.\",\"name\":\"type\",\"Comfy_dtype\":\"COMBO[STRING]\",\"is_required\":\"True\",\"python_dtype\":\"str\"}],\"nodes_outputs\":[{\"desc\":\"Returns a combined CLIP model object, integrating the functionalities of the two specified CLIP models.\",\"name\":\"clip\",\"Comfy_dtype\":\"CLIP\",\"python_dtype\":\"comfy.sd.CLIP\"}],\"extension_github_url\":\"https://github.com/comfyanonymous/ComfyUI\"},\"error\":null}","annotations":null,"meta":null}
2025-09-23 18:10:26 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'explain_node'
2025-09-23 18:10:26 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'explain_node': data=8, ext=None
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 1
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: explain_node
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 8
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: False
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: None...
2025-09-23 18:10:28 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-23 18:10:28 | INFO     | conversation_api.py:invoke_chat:191 | -- Received ext data: None, finished: True
2025-09-23 18:10:28 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 1021 chars, ext: False, finished: True
2025-09-23 18:13:34 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 15:28:10 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 15:53:12 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 15:54:23 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 15:55:41 | INFO     | conversation_api.py:save_workflow_checkpoint:252 | Received save-workflow-checkpoint request
2025-09-25 15:55:41 | INFO     | conversation_api.py:save_workflow_checkpoint:291 | Workflow checkpoint saved with version ID: 3
2025-09-25 15:55:41 | INFO     | conversation_api.py:invoke_chat:104 | Received invoke_chat request
2025-09-25 15:55:41 | INFO     | auth_utils.py:extract_and_store_api_key:27 | ComfyUI Copilot API key extracted and stored: a0f8b38e26f4...
2025-09-25 15:55:42 | INFO     | conversation_api.py:invoke_chat:110 | Request JSON:
2025-09-25 15:55:42 | INFO     | conversation_api.py:invoke_chat:153 | -- Received 5 historical messages
2025-09-25 15:55:42 | INFO     | conversation_api.py:invoke_chat:157 | Using workflow checkpoint ID: 3 for session 72175c3e-820e-4c36-83d2-2465cd905029
2025-09-25 15:55:42 | INFO     | conversation_api.py:invoke_chat:176 | config: {'session_id': '72175c3e-820e-4c36-83d2-2465cd905029', 'workflow_checkpoint_id': 3, 'openai_api_key': '', 'openai_base_url': None, 'model_select': 'gemini-2.5-flash'}
2025-09-25 15:55:43 | INFO     | mcp_client.py:comfyui_agent_invoke:131 | -- Processing 5 messages
2025-09-25 15:55:43 | INFO     | mcp_client.py:comfyui_agent_invoke:138 | === MCP Agent Run starting ===
2025-09-25 15:55:43 | INFO     | mcp_client.py:process_stream_events:178 | Handoff to: ComfyUI-Copilot
2025-09-25 15:55:53 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'recall_workflow' was called
2025-09-25 15:55:53 | INFO     | mcp_client.py:process_stream_events:201 | -- Tool 'gen_workflow' was called
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'recall_workflow'
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'recall_workflow' produced result with data: 3
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:207 | -- Tool output: {"type":"text","text":"{\"answer\":\"Successfully generated a custom workflow: AI Generated Workflow\\n\\nAI has generated a personalized workflow solution for you. If you have any questions about the workflow, feel free to ask.\",\"data\":[{\"id\":36883,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow that generates a highly detailed, realistic, and vibrant image of a futuristic city skyline at sunset, incorporating towering glass skyscrapers, neon reflections on water, a multicolored sky, and flying cars.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"4a455c27278dbf160f71a85489f4c472\",\"score\":null,\"source\":\"AI Generated\"}],\"ext\":[{\"type\":\"workflow\",\"data\":[{\"id\":36883,\"name\":\"AI Generated Workflow\",\"description\":\"Build a workflow that generates a highly detailed, realistic, and vibrant image of a futuristic city skyline at sunset, incorporating towering glass skyscrapers, neon reflections on water, a multicolored sky, and flying cars.\",\"image\":\"https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg\",\"unique_id\":\"4a455c27278dbf160f71a85489f4c472\",\"score\":null,\"source\":\"AI Generated\"}]}],\"instruction\":\"Build a workflow that generates a highly detailed, realistic, and vibrant image of a futuristic city skyline at sunset, incorporating towering glass skyscrapers, neon reflections on water, a multicolored sky, and flying cars.\",\"keywords\":[\"futuristic city\",\"skyline\",\"sunset\",\"skyscrapers\",\"neon lights\",\"reflections\",\"flying cars\",\"detailed\",\"realistic\",\"vibrant\"],\"source\":\"generated\"}","annotations":null,"meta":null}
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:214 | -- Associating output with tool 'gen_workflow'
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:244 | -- Stored result for tool 'gen_workflow': data=1, ext=[{'type': 'workflow', 'data': [{'id': 36883, 'name': 'AI Generated Workflow', 'description': 'Build a workflow that generates a highly detailed, realistic, and vibrant image of a futuristic city skyline at sunset, incorporating towering glass skyscrapers, neon reflections on water, a multicolored sky, and flying cars.', 'image': 'https://ppc-img.oss-ap-southeast-1.aliyuncs.com/AI_workflow_default.jpg', 'unique_id': '4a455c27278dbf160f71a85489f4c472', 'score': None, 'source': 'AI Generated'}]}]
2025-09-25 15:56:26 | INFO     | mcp_client.py:process_stream_events:248 | -- Workflow tool 'gen_workflow' produced result with data: 1
2025-09-25 15:56:34 | INFO     | mcp_client.py:comfyui_agent_invoke:347 | Total tool results: 2
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: recall_workflow
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 3
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:350 | Tool: gen_workflow
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:351 |   - Has data: True
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:352 |   - Data length: 1
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:353 |   - Has ext: True
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:355 |   - Ext types: ['workflow']
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:356 |   - Answer preview: Successfully generated a custom workflow: AI Generated Workflow

AI has generated a personalized wor...
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:357 | === End Tool Results Summary ===

2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:364 | Workflow tools called: ['recall_workflow', 'gen_workflow']
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:368 | Both recall_workflow and gen_workflow were called, merging results
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:375 | recall_workflow succeeded with 3 workflows
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:376 |   - Workflow IDs: [4874, 26724, 26729]
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:383 | gen_workflow succeeded with 1 workflows
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:384 |   - Workflow IDs: [36883]
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 36883 - AI Generated Workflow
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26724 - api-t2i_area_composition_square_area_for_subject
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:397 |   - Added unique workflow: 26729 - i2i-api
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:405 | Total workflows before deduplication: 4
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:406 | Total workflows after deduplication: 4
2025-09-25 15:56:35 | INFO     | mcp_client.py:comfyui_agent_invoke:414 | Returning 4 workflows from successful tools
2025-09-25 15:56:35 | INFO     | conversation_api.py:invoke_chat:216 | -- Sending final response: 2457 chars, ext: True, finished: True
2025-09-25 15:57:13 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 18:31:12 | INFO     | llm_api.py:list_models:36 | Received list_models request
2025-09-25 18:48:55 | INFO     | llm_api.py:list_models:36 | Received list_models request
